<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Sankeyfactory</title>
    <link rel="icon" href="favicon.png">

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="container">
        <svg id="canvas">
            <g id="viewport">
                <g class="links"> </g>
                <g class="nodes"> </g>
            </g>
        </svg>

        <div class="controls">
            <div class="row zoom-controls">
                <p id="ratio-display">Zoom: 1.0x</p>
            </div>
            <div class="row">
                <div class="button" id="create-node">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                        <path
                            d="M440-440H240q-17 0-28.5-11.5T200-480q0-17 11.5-28.5T240-520h200v-200q0-17 11.5-28.5T480-760q17 0 28.5 11.5T520-720v200h200q17 0 28.5 11.5T760-480q0 17-11.5 28.5T720-440H520v200q0 17-11.5 28.5T480-200q-17 0-28.5-11.5T440-240v-200Z" />
                    </svg>
                </div>
                <div class="button" id="lock-viewport">
                    <svg class="unlocked" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                        <path
                            d="M240-80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h360v-80q0-50-35-85t-85-35q-42 0-73.5 25.5T364-751q-4 14-16.5 22.5T320-720q-17 0-28.5-11t-8.5-26q14-69 69-116t128-47q83 0 141.5 58.5T680-720v80h40q33 0 56.5 23.5T800-560v400q0 33-23.5 56.5T720-80H240Zm0-80h480v-400H240v400Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280ZM240-160v-400 400Z" />
                    </svg>
                    <svg class="locked hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                        <path
                            d="M240-80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h40v-80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720v80h40q33 0 56.5 23.5T800-560v400q0 33-23.5 56.5T720-80H240Zm0-80h480v-400H240v400Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280ZM360-640h240v-80q0-50-35-85t-85-35q-50 0-85 35t-35 85v80ZM240-160v-400 400Z" />
                    </svg>
                </div>
            </div>
        </div>

        <div class="dimming hidden" id="node-creation-container">
            <div id="node-creation-modal">
                <div class="title-row">
                    <h2 class="title">Select a recipe</h2>
                    <div class="close" id="node-creation-close">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path
                                d="M480-424 284-228q-11 11-28 11t-28-11q-11-11-11-28t11-28l196-196-196-196q-11-11-11-28t11-28q11-11 28-11t28 11l196 196 196-196q11-11 28-11t28 11q11 11 11 28t-11 28L536-480l196 196q11 11 11 28t-11 28q-11 11-28 11t-28-11L480-424Z" />
                        </svg>
                    </div>
                </div>
                <div class="columns">
                    <div class="content">
                        <div id="recipe-tabs"> </div>
                        <div class="tab-selectors-container">
                            <div id="tab-selectors"> </div>
                        </div>
                    </div>
                    <div id="selected-recipe" class="hidden">
                        <div class="property" id="selected-recipe-name">
                            <div class="title">Recipe name</div>
                            <div class="text">Iron plate</div>
                        </div>
                        <div class="property" id="selected-recipe-machine">
                            <div class="title">Machine</div>
                            <div class="machine">
                                <img class="icon"
                                    src="GameData/SatisfactoryIcons/Buildable/Factory/AssemblerMk1/AssemblerMk1.png"
                                    alt="Iron Plate" loading="lazy">
                            </div>
                        </div>
                        <div class="property" id="selected-recipe-input">
                            <div class="title">Input per min</div>
                            <div class="resource">
                                <img class="icon"
                                    src="GameData/SatisfactoryIcons/Resource/Parts/IronPlate/IronPlates.png"
                                    alt="Iron Plate" loading="lazy">
                                <p class="amount">30</p>
                            </div>
                        </div>
                        <div class="property" id="selected-recipe-output">
                            <div class="title">Output per min</div>
                            <div class="resource">
                                <img class="icon"
                                    src="GameData/SatisfactoryIcons/Resource/Parts/IronPlate/IronPlates.png"
                                    alt="Iron Plate" loading="lazy">
                                <p class="amount">30</p>
                            </div>
                            <div class="resource">
                                <img class="icon"
                                    src="GameData/SatisfactoryIcons/Resource/Parts/IronPlate/IronPlates.png"
                                    alt="Iron Plate" loading="lazy">
                                <p class="amount">30</p>
                            </div>
                        </div>
                        <div class="property" id="selected-recipe-power">
                            <div class="title">Power usage</div>
                            <div class="text">30 MW</div>
                        </div>
                        <div class="button" id="confirm-recipe">Create node</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="help">
        <p>N - create new node</p>
        <p>Alt + Mouse drag - move</p>
        <p>Mouse drag - move node under cursor</p>
        <p>Mouse wheel - zoom</p>
        <p>LMB on slot - connect slot</p>
        <p>Esc - stop connecting slots</p>
    </div>

    <script type="module" src="script.js"></script>
</body>

</html>
